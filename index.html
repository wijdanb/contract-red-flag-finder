<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contract Red Flag Finder</title>
  <!-- Tailwind CSS via CDN for rapid development -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="min-h-screen flex flex-col justify-start items-center p-4">
    <header class="w-full max-w-2xl text-center mt-4 mb-6">
      <h1 class="text-3xl font-bold mb-2">Contract&nbsp;Red&nbsp;Flag&nbsp;Finder</h1>
      <p class="text-sm text-gray-600 italic">This tool provides risk analysis for contracts but is <strong>not legal advice</strong>.</p>
    </header>
    <main class="w-full max-w-2xl">
      <!-- Login Section -->
      <section id="loginSection" class="hidden bg-white shadow rounded p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">Log in</h2>
        <div class="space-y-4">
          <div id="requestCodeForm">
            <label class="block mb-1 font-medium" for="emailInput">Email address</label>
            <input id="emailInput" type="email" required class="w-full border rounded px-3 py-2" placeholder="you@example.com" />
            <button id="sendLinkBtn" class="mt-2 w-full bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700">Send magic link</button>
            <p id="requestCodeMsg" class="mt-2 text-sm text-gray-600"></p>
          </div>
          <div id="verifyCodeForm" class="hidden">
            <label class="block mb-1 font-medium" for="codeInput">Enter code</label>
            <input id="codeInput" type="text" class="w-full border rounded px-3 py-2" placeholder="Paste code from email" />
            <button id="verifyCodeBtn" class="mt-2 w-full bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700">Verify code</button>
            <p id="verifyCodeMsg" class="mt-2 text-sm text-gray-600"></p>
          </div>
        </div>
      </section>
      <!-- Analysis Section -->
      <section id="analysisSection" class="hidden bg-white shadow rounded p-6">
        <h2 class="text-xl font-semibold mb-4">Analyse a Contract</h2>
        <form id="uploadForm" class="space-y-4">
          <div>
            <label class="block mb-1 font-medium" for="fileInput">Upload PDF or DOCX file</label>
            <input id="fileInput" type="file" accept=".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document" required class="w-full" />
          </div>
          <div>
            <label class="block mb-1 font-medium" for="docTypeSelect">Document type</label>
            <select id="docTypeSelect" class="w-full border rounded px-3 py-2">
              <option value="freelance_contract">Freelance contract</option>
              <!-- Future document types could be added here -->
            </select>
          </div>
          <button id="analyzeBtn" type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Analyse</button>
          <p id="uploadMsg" class="text-sm text-gray-600"></p>
        </form>
        <div id="resultsContainer" class="hidden mt-6">
          <h3 class="text-lg font-semibold mb-2">Analysis Results</h3>
          <div class="mb-4">
            <span class="font-medium">Risk score:</span>
            <span id="riskScore" class="ml-1 font-mono"></span>
          </div>
          <div class="mb-4">
            <span class="font-medium">Summary:</span>
            <p id="summaryText" class="mt-1 whitespace-pre-line"></p>
          </div>
          <div>
            <span class="font-medium">Issues:</span>
            <ul id="issuesList" class="list-disc list-inside space-y-2 mt-1"></ul>
          </div>
        </div>
      </section>
    </main>
  </div>
  <!-- Consent Modal -->
  <div id="consentModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white max-w-lg w-full rounded shadow p-6 space-y-4">
      <h2 class="text-xl font-semibold">Consent required</h2>
      <p class="text-sm text-gray-700">Before using the Contract Red Flag Finder you must accept our Terms of Service and Privacy Policy. Your documents are processed transiently for analysis and immediately deleted. No contract text is stored.</p>
      <div class="text-sm text-gray-600">
        <a href="#" class="underline text-blue-600 hover:text-blue-800" target="_blank">Terms of Service</a> and
        <a href="#" class="underline text-blue-600 hover:text-blue-800" target="_blank">Privacy Policy</a>
      </div>
      <button id="acceptConsentBtn" class="w-full bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700">I Accept</button>
    </div>
  </div>
  <script type="module" src="/public/ui.js"></script>
</body>
</html>